# CA2 Part 2 - Build Tools with Maven üõ†Ô∏è 

1. Create a new branch called tut-basic-maven using the following command:
   ```groovy
   git checkout -b tut-basic-maven
   ```

1.1 Refer to the provided image for guidance.  

![image example](https://github.com/marianafpereira/DevOps-23-24-JPE-1231845/wiki/Project-Images-For-CA2-Part2#step-1)

2. Navigate to https://start.spring.io to initiate a new Spring Boot project with Maven. The project should include the following dependencies: Rest Repositories, Thymeleaf, JPA, and H2.  

2.1 Refer to the provided image for guidance.  

![image example](https://github.com/marianafpereira/DevOps-23-24-JPE-1231845/wiki/Project-Images-For-CA2-Part2#step-2)

3. Unzip the downloaded project file into the "CA2/Part2_maven/" directory of your repository. This gives you a basic Spring application that can be built using Maven.  

4. You can view the available Maven tasks by running the command ```mvn -v ```.  

5. Remove the existing src directory. We aim to use the code from the basic tutorial instead.  

6. Copy the src directory (including all its subdirectories) from the basic tutorial folder to this new folder.  

Also, copy the *webpack.config.js* and *package.json* files.  

7. Delete the src/main/resources/static/built/ directory as it should be generated by the webpack tool from the JavaScript code. 8.1 Refer to the provided image for guidance.  


8. You can now test the application by running the command ```mvn spring-boot:run```. 

9. You'll notice that the webpage at http://localhost:8080 is blank. This is because the Maven build is missing the plugin required to handle the frontend code.

*IMPORTANT NOTE* 

Modify the imports in *Employee.java* from *javax* to *jakarta*. 

1.1 Refer to the provided image for guidance.  

![image example](https://github.com/marianafpereira/DevOps-23-24-JPE-1231845/wiki/Project-Images-For-CA2-Part2#step-13) 

Insert "packageManager": ```"npm@9.6.7"``` into the package.json file. 

1.1 Refer to the provided image for guidance.  

![image example](https://github.com/marianafpereira/DevOps-23-24-JPE-1231845/wiki/Project-Images-For-CA2-Part2#step-11)

2. Depending on your Java version (8, 11, or 17), add the corresponding line to the plugins section in pom.xml.

```groovy
    <plugin>
        <groupId>com.github.eirslett</groupId>
        <artifactId>frontend-maven-plugin</artifactId>
        <version>1.9.1</version>
        <configuration>
            <nodeVersion>v16.20.2</nodeVersion>
            <installDirectory>target</installDirectory>
        </configuration>
    </plugin>
```

3. Execute the command ```mvn clean install```. This will run tasks associated with the frontend and generate the frontend code. 
4. To run the application, use the command ```mvn spring-boot:run```  
5. The application can also be started with the command ```mvn spring-boot:run```  
6. Create a Maven task to copy the generated *jar* file to a *"dist"* folder at the root level of the project. This can be done by adding the following plugin to your *pom.xml* file:

```groovy
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>3.2.0</version>
    <executions>
        <execution>
            <id>copy-jar</id>
            <phase>package</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>${project.basedir}/dist</outputDirectory>
                <resources>
                    <resource>
                        <directory>${project.build.directory}</directory>
                        <includes>
                            <include>*.jar</include>
                        </includes>
                    </resource>
                </resources>
            </configuration>
        </execution>
    </executions>
</plugin>
```

7. Implement a Maven task to eliminate all files produced by webpack, typically found at *src/resources/main/static/built/.* This new task should be executed automatically by Maven before the task clean. This newly created task should be automatically executed by Maven prior to the clean task.

```groovy
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>3.1.0</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>src/main/resources/static/built</directory>
                <includes>
                    <include>**/*</include>
                </includes>
            </fileset>
        </filesets>
    </configuration>
</plugin>
```

8. Lastly, execute the command ```mvn clean``` 
9. Finally, if everything is working as expected merge the branch to the main branch using the following command ```git merge --no-ff tut-basic-maven``` and add the *tag ca2-part2*